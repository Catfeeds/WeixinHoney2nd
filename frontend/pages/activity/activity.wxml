
<import src="template/template.wxml"></import>
<view class="container">
    <view class="tab">
        <view class="tab-bar">
            <view bindtap="selectTab" class="tab-item tab-item1 {{active1}}" id="tab-btn1">
        热门活动
      </view>
            <view bindtap="selectTab" class="tab-item tab-item2 {{active2}}" id="tab-btn2">
        关注场馆活动
      </view>
        </view>
        <image bindtap="On_click_modal_open" class="tab-detail-open" src="../../image/filter@2x.png"></image>
    </view>
    <scroll-view scrollY class="activities">
        <view wx:for="{{events}}" wx:key="index">
            <view wx:if="{{active1=='active'}}">
                <view wx:if="{{!isfilterset}}">
                    <template is="act-template" data="{{item:item,userRole:userRole,eventType:eventType,eventState:eventState,favor:favor,index:index}}"></template>
                </view>
                <view wx:if="{{isfilterset&&select_role==item.role&&select_type==item.type&&select_start<=item.start_time_now&&item.end_time_now<=select_end}}">
                    <template is="act-template" data="{{item:item,userRole:userRole,eventType:eventType,eventState:eventState,favor:favor,index:index}}"></template>
                </view>
            </view>
            <view wx:if="{{active2=='active'}}">
                <view wx:if="{{!isfilterset&&item.is_favor!='0'}}">
                    <template is="act-template" data="{{item:item,userRole:userRole,eventType:eventType,eventState:eventState,favor:favor,index:index}}"></template>
                </view>
                <view wx:if="{{isfilterset&&select_role==item.role&&select_type==item.type&&select_start<=item.start_time_now&&item.end_time_now<=select_end&&item.is_favor!='0'}}">
                    <template is="act-template" data="{{item:item,userRole:userRole,eventType:eventType,eventState:eventState,favor:favor,index:index}}"></template>
                </view>
            </view>
        </view>
    </scroll-view>
    <view bindtap="hideModal" catchtouchmove="preventTouchMove" class="modal-mask" wx:if="{{showModal}}"></view>
    <view class="modal-dialog" wx:if="{{showModal}}">
        <view class="modal-title">
            <view bindtap="On_click_hide" class="modal-title-image">{{'<'}}</view>
            <view class="modal-title-text" style="font-weight: bold;">筛选</view>
            <text class="modal-text-select">请选择发起人类型</text>
            <view class="modal-tab-bar">
                <view bindtap="on_click_role" class="modal-tab-item modal-tab-item1 {{modal_active1}}" id="{{1}}">
          场馆主
        </view>
                <view bindtap="on_click_role" class="modal-tab-item modal-tab-item2 {{modal_active2}}" id="{{2}}">
          个人
        </view>
            </view>
        </view>
        <view class="modal-selkind">
            <text class="modal-selkind-text">活动类型</text>
            <view class="modal-kind-view">
                <view bindtap="on_click_type" class="modal-kind-btn {{filter_type==index?'selected':''}}" id="{{index}}" wx:for="{{sport_kind_text}}" wx:key="index">{{item}}</view>
            </view>
            <view class="modal-actual-time">活动时间</view>
            <picker bindchange="starttime_picker" class="modal-start-time" end="2999-12-12" mode="date" start="1999-01-01">{{starttime}}</picker>
            <view class="model-time-symbol"></view>
            <picker bindchange="endtime_picker" class="modal-end-time" end="2999-12-12" mode="date" start="1999-01-01">{{endtime}}</picker>
            <view class="modal-date"></view>
            <button bindtap="click_cancel" class="modal-cancel">全部</button>
            <button bindtap="change_filter" class="modal-ok">确定</button>
        </view>
    </view>
</view>
