<import src="../template/com_template.wxml"></import>
<import src="../template/reg_template.wxml"></import>
<view class="container">
    <view bindtap="show_preview" class="personal-img-wrapper">
        <image class="personal-event-img" mode="aspectFill" src="{{event.pic}}"></image>
    </view>
    <view class="event-info">
        <view class="event-type-info">
            <text class="event-type" style="font-weight: bold;">{{event.eventName}}</text>
            <text class="event-status">{{eventState[event.state]}}</text>
        </view>
        <view class="detail-info">
            <image src="../../../image/my_bee_category@2x.png"></image>
            <text>{{eventType[event.type]}}</text>
            <image src="../../../image/my_bee_number@2x.png"></image>
            <text>{{register_num}}人</text>
            <block wx:if="{{event.role==1}}">
                <image src="../../../image/my_bee_m@2x.png" style="width:32rpx; height: 36rpx;"></image>
                <text>{{event.cost}}元/人</text>
            </block>
            <image bindtap="on_click_like" class="favor_star" src="../../../image/good_s@2x.png" wx:if="{{event.rating>0}}"></image>
            <image bindtap="on_click_like" class="favor_star" src="../../../image/good_n@2x.png" wx:else></image>
        </view>
        <view class="act_date">
            <view>时间 | {{event.start_time+' - '+event.end_time}}</view>
            <text class="act_favour">{{favourite_num}}</text>
        </view>
        <view class="temp-fonts">
            <view class="detail-add">地址 |</view>
            <view class="detail-add1">
                <text selectable="true">{{event.province+event.city+event.area+event.detail_address}}</text>
            </view>
        </view>
    </view>
    <view class="place-info">
        <block wx:if="{{event.role==1}}">
            <view class="place-info-view">
                <text class="place-info-text">场馆名称：{{event.site_name}}</text>
            </view>
            <view class="place-info-view">
                <text class="place-info-text">馆主姓名：{{event.name}}</text>
            </view>
            <view class="place-info-view">
                <text class="place-info-text">发起人：{{event.agent_name}}</text>
            </view>
            <view class="place-info-view">
                <view bindtap="phone_call" class="place-info-text">联系方式：<text style="text-decoration: underline; color: blue;">{{event.agent_phone}}</text>
                </view>
            </view>
        </block>
        <block wx:else>
            <view class="place-info-view">
                <text class="place-info-text">发起人：{{event.name}}</text>
            </view>
            <view class="place-info-view">
                <text class="place-info-text">联系方式：{{event.agent_phone}}</text>
            </view>
        </block>
        <view class="place-info-view">
            <text class="place-info-text">人数上限：不超过{{event.limit}}人</text>
        </view>
    </view>
    <view class="introduce">
        <view class="introduce-view">
            <text class="introduce-border" style="font-weight: bold;">活动简介</text>
        </view>
        <view class="event-comment" style="width: 90%;">
            <text class="introduce-detail" selectable="true">{{event.comment}}</text>
        </view>
    </view>
    <view class="booking_detail" wx:if="{{event.state!=2}}">
        <view class="reg_member_view">
            <view class="reg_cls_title">
                <text class="reg_cls_all_comments" style="font-weight: bold;">报名成员（{{register_num}}人)</text>
                <text bindtap="on_click_booking" class="view_more_detail_booking" wx:if="{{booking.length>0}}">查看更多》</text>
            </view>
        </view>
        <template is="registeration_member" data="{{item:item,index:index,pay_type:pay_type}}" wx:for="{{booking}}" wx:key="index"></template>
    </view>
    <view class="member_detail" wx:if="{{event.state==1}}">
        <view class="cls_title">
            <text class="cls_all_comments" style="font-weight: bold;">评论（{{rating.length}}人)</text>
            <text bindtap="on_click_rating" class="view_more_detail" wx:if="{{rating.length>0}}">查看更多》</text>
        </view>
        <template is="registerd_member" data="{{item:item,img_black_star_src:img_black_star_src,img_yellow_star_src:img_yellow_star_src,star_img_position:star_img_position}}" wx:for="{{rating}}" wx:key="index"></template>
    </view>
    <view bindtap="on_click_cancel_btn" class="cancel-btn" wx:if="{{event.state=='0'&&isshowcancel}}">取消活动</view>
</view>
